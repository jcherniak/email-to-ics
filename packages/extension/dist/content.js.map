{
  "version": 3,
  "sources": ["../src/content.ts"],
  "sourcesContent": ["/**\n * Content Script for Email-to-ICS Extension\n * Iframe-based architecture matching original\n */\n\nlet emailToIcsFrame: HTMLIFrameElement | null = null;\n\n// Listen for messages from background script\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n  if (message.action === 'toggle-iframe') {\n    if (emailToIcsFrame) {\n      removeIframe();\n    } else {\n      createIframe(message.selectedText);\n    }\n    sendResponse({ success: true });\n  } else if (message.action === 'close-iframe') {\n    removeIframe();\n    sendResponse({ success: true });\n  } else if (message.action === 'get-page-info') {\n    sendResponse({\n      url: window.location.href,\n      title: document.title,\n      html: document.documentElement.outerHTML,\n      text: document.body.innerText\n    });\n  }\n});\n\n/**\n * Create iframe loading popup.html\n */\nfunction createIframe(selectedText?: string) {\n  if (emailToIcsFrame) {\n    return;\n  }\n\n  // Create iframe with fixed positioning\n  const iframe = document.createElement('iframe');\n  iframe.id = 'email-to-ics-iframe';\n  iframe.src = chrome.runtime.getURL('popup.html');\n  iframe.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    width: 450px;\n    height: 600px;\n    z-index: 2147483647;\n    background: white;\n    border: 3px solid #0d6efd;\n    border-radius: 8px;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n    resize: both;\n    min-width: 350px;\n    min-height: 400px;\n  `;\n\n  document.body.appendChild(iframe);\n  emailToIcsFrame = iframe;\n\n  // Send current page info to iframe when it loads\n  iframe.onload = () => {\n    iframe.contentWindow?.postMessage({\n      type: 'INIT_FROM_CONTENT',\n      data: {\n        url: window.location.href,\n        title: document.title,\n        selectedText: selectedText\n      }\n    }, '*');\n  };\n}\n\nfunction removeIframe() {\n  if (emailToIcsFrame) {\n    emailToIcsFrame.remove();\n    emailToIcsFrame = null;\n  }\n}\n\n// Listen for messages from iframe to parent\nwindow.addEventListener('message', (event) => {\n  if (event.source === emailToIcsFrame?.contentWindow) {\n    if (event.data.type === 'RESIZE_IFRAME') {\n      if (emailToIcsFrame) {\n        emailToIcsFrame.style.height = event.data.height + 'px';\n      }\n    } else if (event.data.type === 'CLOSE_IFRAME') {\n      removeIframe();\n    }\n  }\n});\n\n// Keyboard shortcut to toggle iframe\ndocument.addEventListener('keydown', (e) => {\n  if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'E') {\n    e.preventDefault();\n    if (emailToIcsFrame) {\n      removeIframe();\n    } else {\n      createIframe();\n    }\n  }\n});"],
  "mappings": ";;;AAKA,MAAI,kBAA4C;AAGhD,SAAO,QAAQ,UAAU,YAAY,CAAC,SAAS,QAAQ,iBAAiB;AACtE,QAAI,QAAQ,WAAW,iBAAiB;AACtC,UAAI,iBAAiB;AACnB,qBAAa;AAAA,MACf,OAAO;AACL,qBAAa,QAAQ,YAAY;AAAA,MACnC;AACA,mBAAa,EAAE,SAAS,KAAK,CAAC;AAAA,IAChC,WAAW,QAAQ,WAAW,gBAAgB;AAC5C,mBAAa;AACb,mBAAa,EAAE,SAAS,KAAK,CAAC;AAAA,IAChC,WAAW,QAAQ,WAAW,iBAAiB;AAC7C,mBAAa;AAAA,QACX,KAAK,OAAO,SAAS;AAAA,QACrB,OAAO,SAAS;AAAA,QAChB,MAAM,SAAS,gBAAgB;AAAA,QAC/B,MAAM,SAAS,KAAK;AAAA,MACtB,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AAKD,WAAS,aAAa,cAAuB;AAC3C,QAAI,iBAAiB;AACnB;AAAA,IACF;AAGA,UAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,WAAO,KAAK;AACZ,WAAO,MAAM,OAAO,QAAQ,OAAO,YAAY;AAC/C,WAAO,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBvB,aAAS,KAAK,YAAY,MAAM;AAChC,sBAAkB;AAGlB,WAAO,SAAS,MAAM;AACpB,aAAO,eAAe,YAAY;AAAA,QAChC,MAAM;AAAA,QACN,MAAM;AAAA,UACJ,KAAK,OAAO,SAAS;AAAA,UACrB,OAAO,SAAS;AAAA,UAChB;AAAA,QACF;AAAA,MACF,GAAG,GAAG;AAAA,IACR;AAAA,EACF;AAEA,WAAS,eAAe;AACtB,QAAI,iBAAiB;AACnB,sBAAgB,OAAO;AACvB,wBAAkB;AAAA,IACpB;AAAA,EACF;AAGA,SAAO,iBAAiB,WAAW,CAAC,UAAU;AAC5C,QAAI,MAAM,WAAW,iBAAiB,eAAe;AACnD,UAAI,MAAM,KAAK,SAAS,iBAAiB;AACvC,YAAI,iBAAiB;AACnB,0BAAgB,MAAM,SAAS,MAAM,KAAK,SAAS;AAAA,QACrD;AAAA,MACF,WAAW,MAAM,KAAK,SAAS,gBAAgB;AAC7C,qBAAa;AAAA,MACf;AAAA,IACF;AAAA,EACF,CAAC;AAGD,WAAS,iBAAiB,WAAW,CAAC,MAAM;AAC1C,SAAK,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,EAAE,QAAQ,KAAK;AAC3D,QAAE,eAAe;AACjB,UAAI,iBAAiB;AACnB,qBAAa;AAAA,MACf,OAAO;AACL,qBAAa;AAAA,MACf;AAAA,IACF;AAAA,EACF,CAAC;",
  "names": []
}
