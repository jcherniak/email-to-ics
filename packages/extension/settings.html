<!DOCTYPE html>
<html>
<head>
    <title>Email to ICS Settings</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <style>
        body {
            width: 600px;
            padding: 20px;
            margin: 0 auto;
        }
        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
        }
        .form-section h3 {
            margin-top: 0;
            color: #495057;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
        }
        .help-text {
            font-size: 0.875rem;
            color: #6c757d;
            margin-top: 5px;
        }
        .status-message {
            padding: 10px;
            border-radius: 4px;
            margin-top: 15px;
            display: none;
        }
        .status-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <h1 class="mb-4">Email to ICS Extension Settings</h1>
        
        <form id="settingsForm">
            <!-- API Keys Section -->
            <div class="form-section">
                <h3>API Configuration</h3>
                
                <div class="mb-3">
                    <label for="openRouterKey" class="form-label">OpenRouter API Key *</label>
                    <input type="password" class="form-control" id="openRouterKey" required>
                    <div class="help-text">
                        Get your API key from <a href="https://openrouter.ai/keys" target="_blank">OpenRouter</a>. 
                        This is used for AI processing of web content.
                    </div>
                </div>
                
                <div class="mb-3">
                    <label for="postmarkApiKey" class="form-label">Postmark Server Token *</label>
                    <input type="password" class="form-control" id="postmarkApiKey" required>
                    <div class="help-text">
                        Get your server token from <a href="https://postmarkapp.com" target="_blank">Postmark</a>. 
                        This is used for sending calendar invitations via email.
                    </div>
                </div>
                
                <div class="mb-3">
                    <label for="aiModel" class="form-label">AI Model</label>
                    <select class="form-select" id="aiModel">
                        <option value="anthropic/claude-3.5-sonnet">Claude 3.5 Sonnet</option>
                        <option value="anthropic/claude-3-haiku">Claude 3 Haiku</option>
                        <option value="openai/gpt-4o">GPT-4o</option>
                        <option value="openai/gpt-4o-mini">GPT-4o Mini</option>
                    </select>
                    <div class="help-text">
                        Choose the AI model for processing calendar events. Claude models generally work better for this task.
                    </div>
                </div>
            </div>
            
            <!-- Email Configuration Section -->
            <div class="form-section">
                <h3>Email Configuration</h3>
                
                <div class="mb-3">
                    <label for="fromEmail" class="form-label">From Email Address *</label>
                    <input type="email" class="form-control" id="fromEmail" required>
                    <div class="help-text">
                        The email address that calendar invitations will be sent from. 
                        Must be verified in your Postmark account.
                    </div>
                </div>
                
                <div class="mb-3">
                    <label for="toTentativeEmail" class="form-label">Tentative Events Recipient *</label>
                    <input type="email" class="form-control" id="toTentativeEmail" required>
                    <div class="help-text">
                        Email address to receive tentative calendar invitations.
                    </div>
                </div>
                
                <div class="mb-3">
                    <label for="toConfirmedEmail" class="form-label">Confirmed Events Recipient *</label>
                    <input type="email" class="form-control" id="toConfirmedEmail" required>
                    <div class="help-text">
                        Email address to receive confirmed calendar invitations.
                    </div>
                </div>
                
            </div>
            
            <!-- Actions -->
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary">Save Settings</button>
                <button type="button" id="testConnection" class="btn btn-outline-secondary">Test API Connection</button>
                <button type="button" id="clearSettings" class="btn btn-outline-danger">Clear All Settings</button>
            </div>
            
            <div id="statusMessage" class="status-message"></div>
        </form>
    </div>
    
    <script src="settings.js"></script>
</body>
</html>